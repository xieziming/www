<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<title>  光传输网网管DCN总结 &raquo; 谢子明</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="description" content="光传输网网管DCN总结  " />
<meta name="keywords" content="谢子明" />
<link rel="stylesheet" href="http://www.xieziming.com/wp-content/themes/ziming/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.xieziming.com/feed" />
<link rel="alternate" type="application/rss+xml" href="http://www.xieziming.com/comments/feed" title="谢子明 Comments RSS feed" />
<link rel="shortcut icon" href="http://www.xieziming.com/wp-content/themes/ziming/favicon.ico">
<link rel="Bookmark" href="http://www.xieziming.com/wp-content/themes/ziming/favicon.ico">
<link rel="pingback" href="http://www.xieziming.com/xmlrpc.php" />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="谢子明 &raquo; 光传输网网管DCN总结 Comments Feed" href="http://www.xieziming.com/archives/732.html/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.xieziming.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<script type='text/javascript' src='http://www.xieziming.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://www.xieziming.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='http://www.xieziming.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.xieziming.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.xieziming.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='别紧张,我不是什么好人' href='http://www.xieziming.com/archives/727.html' />
<link rel='next' title='人文（一）宗教' href='http://www.xieziming.com/archives/1316.html' />
<meta name="generator" content="WordPress 4.7" />
<link rel="canonical" href="http://www.xieziming.com/archives/732.html" />
<link rel='shortlink' href='http://www.xieziming.com/?p=732' />
<link rel="alternate" type="application/json+oembed" href="http://www.xieziming.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fxieziming.com%2Farchives%2F732.html" />
<link rel="alternate" type="text/xml+oembed" href="http://www.xieziming.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fxieziming.com%2Farchives%2F732.html&#038;format=xml" />
 	<link rel="stylesheet" href="http://www.xieziming.com/wp-content/plugins/live-calendar/live-calendar.css" type="text/css" media="screen" /> 
<link rel="stylesheet" href="http://www.xieziming.com/wp-content/plugins/wp-code/wp-code.css" type="text/css" media="screen" />

<link rel="stylesheet" href="http://www.xieziming.com/wp-content/plugins/zoom-highslide/highslide.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://www.xieziming.com/wp-content/plugins/zoom-highslide/js/highslide-full.packed.js"></script>
<script type="text/javascript">
	hs.graphicsDir = 'http://www.xieziming.com/wp-content/plugins/zoom-highslide/graphics/';
	hs.align = 'center';
	hs.transitions = ['expand', 'crossfade'];
	hs.outlineType = 'rounded-white';
  hs.wrapperClassName = 'controls-in-heading';
	hs.showCredits=false;
	hs.fadeInOut = true;
	hs.dimmingOpacity = 0.8;

	// Add the controlbar
	if (hs.addSlideshow) hs.addSlideshow({
		//slideshowGroup: 'group1',
		interval: 4000,
		repeat: false,
		useControls: true,
		fixedControls: false,
		overlayOptions: {
			opacity: 1,
			position: 'top center',
			hideOnMouseOut: true
		}
	});
</script>

<script type="text/javascript">
	var widthRestriction = 668; 
	var heightRestriction = 1000; 
</script>
<script type="text/javascript" src="http://www.xieziming.com/wp-content/plugins/zoom-highslide/js/zoom.js"></script>
	
<!--script src="http://www.xieziming.com/wp-content/themes/ziming/js/mouse.js" type="text/javascript"></script--> 
</head>
<body class="normalbg">
<div id="container">
	<div id="head">
		<div id="nav">
			<ul>
				<li class="first"><a href="http://www.xieziming.com" title="首页">首页</a></li>
				<li class="page_item page-item-2"><a href="http://www.xieziming.com/recent" title="最近">最近</a></li>
				<li class="page_item page-item-3"><a href="http://www.xieziming.com/photo" title="Photo">映象</a></li>
				<li class="page_item page-item-4"><a href="http://www.xieziming.com/food" title="Food">美食</a></li>
				<li class="page_item page-item-5"><a href="http://www.xieziming.com/topic" title="关键字">话题</a></li>
				<li class="page_item page-item-6"><a href="http://www.xieziming.com/travel" title="Travel">旅行</a></li>
				<li class="page_item page-item-7"><a href="http://www.xieziming.com/literature" title="Literature">文艺</a></li>
				<li class="page_item page-item-8"><a href="http://www.xieziming.com/wiki" title="技术维基">维基</a></li>
				<li class="page_item page-item-9"><a href="http://www.xieziming.com/calendar" title="Calendar">点滴</a></li>
			</ul>
		</div><!-- /nav -->		
	</div><!-- /head -->
<div id="main" class="altmainbg">

<script type="text/javascript">
function show_page(id,count,source){
	for (var i=1;i<=count;i++){
		if(id != i){
				jQuery("#part_"+i).hide();
				document.getElementById("li_"+i).style.fontWeight = "normal";
				document.getElementById("li_"+i).style.fontSize = "18px";
		}
	}
	jQuery("#part_"+id).show();
	document.getElementById("li_"+id).style.fontWeight = "bold";
	document.getElementById("li_"+id).style.fontSize = "30px";
	jQuery('body,html').animate({scrollTop:0},1000);
        return false;
}
</script>
<div id="content">

	<div class="post" id="post-732">
		<h2 class="title">光传输网网管DCN总结</h2>
		<p class="postmetadata">
			<span class="date">24 February 2009</span>
			<span class="category">Categoried in <a href="http://www.xieziming.com/topic/ji-shu-wei-ji" rel="category tag">技术维基</a></span>
			<span class="comments">0</span>
			<span class="view">Preview : 153 , Read : 1758 </span>
			<span class="mail">Index : 2377 </span>
		</p>
		<div class="entry">				
<div id="part_1"><p>SDH网管网是由两部分组成，根据协议可划分为TCP/IP-DCN和OSI-ECC。上层应用TCP/IP使EMS服务器、NMS服务器和各自的工作站实现互通，而且也实现了EMS和接入网元之间的通信。下层使用符合OSI框架的ECC协议使NE和NE节点实现互通。上层的TCP/IP－DCN可以使用数据网的路由器、网桥等数据设备实现。下层的OSI－ECC是构建在网元之间的DCC通道之上的数据通路。<br />
<!--more--><br />
如果想了解下ECC的架构，可以参见我写的<a href="http://ideashot.com/archives/2310.html" target="_blank">ECC协议簇学习</a></p>
<p>TCP/IP-DCN:<br />
DCN网络的实现可以多种多样，在构建DCN网时需要大量采用集线器（HUB/SWITCH）、网桥（BRIDGE）、路由器（ROUTER）、MODEM或接口协议转换器等设备。对中兴网管系统而言，DCN负责NMS、EMS、接入网元之间的IP通信，另外，在网元之间的通信如果不走ECC通路，也可以采用DCN网络来连接，这个时候叫做内部DCN。一句话，DCN为SMN提供了基于TCP/IP的连接通路。</p>
<p>OSI-ECC:<br />
在SDH帧结构中属于段开销（SOH）字节的D1—D12构成数据通信链路DCC，嵌入控制通路ECC指的是构建DCC之上的数据通信通路。SOH中的DCC用来构成光传输网传送链路，其中D1—D3字节称为再生段DCC，用于再生段终端之间交流OAM信息，速率为192kbit/s，D4—D12字节称为复用段DCC，用于复用段终端之间交流OAM信息，速率为576kbit/s，总共768kbit/s的数据通路为SDH网的管理和控制提供了强大的通信基础结构。</p>
<p>SDH网元之间的ECC网络主要建立在以开销字节为物理通道的DCC通道上，网络中的任何网元之间都可以实现互通。如果网元之间没有光连接，可以采用带内DCN网络通过以太网口进行设备互连。网元之间的ECC通信协议遵循TCP/IP协议，采用SDH开销字节中的D1～D3，或者D1~D12构成的DCC传送通道。</p>
<p>OSPF是目前内部网关协议中使用最为广泛、性能最优的一个协议，它具有路由收敛速度快，支持变长子网掩码(VLSM)、支持等值路由，适合于大规模的网络。<br />
链路状态通告LSA是每个OSPF路由器计算路由的最基本信息，它描述路由选择域的局部情况。综合所有的LSA，就可以形成一个链路状态数据库。当一个OSPF路由器从一个端口接收到一个新的LSA时，它会将这个LSA存入自己的链路状态数据库中，并将这个LSA沿其它端口发送出去，这个过程称为泛洪法。<br />
OSPF协议可以将网络分成一个个的区域（area），区域之间不会交换LSA信息，这样就会减轻每个区域内部路由选择协议对处理器以及网络带来的负担。同时处于几个区域中的OSPF路由器叫区域边界路由器。处于自治系统边界的OSPF路由器被称为自治系统边界路由器。<br />
中兴的传输设备是基于TCP/IP协议簇的，OSPF在中兴设备上的应用也遵循上述特点。但是略有不同的是中兴ECC对OSPF略做改动：1、中兴设备对OSPF的分域管理中，强制了非骨干域的路由在骨干域中聚合为一条路由；2、中兴设备默认192.0.0.0域为骨干域，即0域或者0.0.0.0域。</p>
<p>关于ECC路由表我曾经写过一篇<a href="http://ideashot.com/archives/567.html">《中兴传输设备ECC路由表初探》</a></p>
</div><div id="part_2" style="display:none;"><p>各种DCN模型<br />
EMS到接入网元之间各种实际的组网情况千差万别，不同的需求导致不同的网管连接方式。网管连接的方式一般取决于EMS主机和接入网元之间是否能够之间连接和是否要求网络监控保护。</p>
<p>方式一、直接网线连接<br />
当EMS主机和接入网元可以直接连接在同一个HUB或者交换机上，并且网络监控不要求第二路由保护的时候，EMS和接入网元一般就采用这种直接网线连接的方式。直接网线连接的方式最简单易行，也最安全可靠，在各种本地网上大量使用。<br />
这种情况下，IP地址通常设置为和接入网元同一个IP地址段。路由设置中，为了保证下行数据流的正常传送，EMS主机需要设置网关为接入网元的IP地址193.1.1.18/24或者设置路由：“route add 193.1.0.0 mask 255.255.0.0 193.1.1.18”（这里假设193.1.0.0/16包含了所有网元）。由于中兴的设备是基于TCP/IP协议簇的，设备会缺省运行OSPF，所有网元都有到接入网段的路由，因此上行数据流可以正常到达EMS主机。如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/1.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/1.jpg"  alt="" /></a></p>
<p>请注意，如果对网管IP地址的规划和设备不在同一网段，那么就需要在EMS主机上添加一个同一网段的IP地址，这种时候就只能使用路由方式。另外，如果网络有多个子网，分别有不同的接入网元，那么这个时候也不能使用网关而只能对不同的子网加相应的路由。如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/2.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/2.jpg"  alt="" /></a></p>
</div><div id="part_3" style="display:none;"><p>方式二、网桥方式<br />
当EMS主机和接入网元不能直接连接在同一个HUB或者交换机上，而且网络监控不要求第二路由保护的时候，一般可以使用这种方式。使用网桥方式其实相当于把网线延长，变相地属于第一种方式，但是毫无疑问，这个时候引入了网桥设备，引入了可能发生故障的节点。EMS主机IP地址设置和路由设置上和直接网线连接完全一样，如下图所示，具体配置不再赘述。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/3.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/3.jpg"  alt="" /></a></p>
<p>方式三、一对路由器<br />
当EMS主机和接入网元不能直接连接在同一个HUB或者交换机上，而且网络监控不要求第二路由保护，而且EMS主机和接入网元不在同一网段的时候，一般使用这种方式。这种方式需要路由器启用和设备网络相同域的OSPF，或者启用为骨干域的OSPF，另一种方式是在路由器上配置静态路由，此时需要在EMS主机上配置网关或者添加静态路由、在路由器上加双向静态路由且接入网元也需要加静态路由。</p>
</div><div id="part_4" style="display:none;"><p>这种方式的建议最好使用动态路由：1、EMS主机把网关设置为路由器的局域网口或者加路由：“route add 193.1.0.0 mask 255.255.0.0 132.1.1.1”，这里假设193.1.0.0/16包含了所有网元，132.1.1.1为EMS侧的路由器的局域网地址；2、路由器启用域为骨干域或者和设备域一致的OSPF动态路由协议，请注意，和网元相连的路由器局域网口需要启用和设备一致的域（本例为193.0.0.0域），这样路由器才能起到ABR路由器的作用，才能正常转发路由表。如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/4.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/4.jpg"  alt="" /></a></p>
<p>也可以使用静态路由方式：1、EMS主机把网关设置为路由器的局域网口或者加路由：“route add 193.1.0.0 mask 255.255.0.0 132.1.1.3”，这里假设193.1.0.0/16包含了所有网元，132.1.1.3为EMS侧的路由器的局域网地址；2、路由器加双向静态路由，即下行EMS侧路由器加“route add 193.1.0.0 mask 255.255.0.0 10.1.1.2” ，接入网元侧路由器加“route add 193.1.0.0 mask 255.255.0.0 193.1.1.1”这里假设10.1.1.2为接入网元侧的路由器的广域网地址，193.1.1.1为局域网地址；上行接入网元侧路由器加“route add 132.1.1.0 mask 255.255.255.0 10.1.1.1” 这里假设132.1.1.X是EMS主机地址，10.1.1.1为EMS主机侧的路由器的广域网地址。3、在接入网元上加静态路由“route add 132.1.1.0 mask 255.255.255.0 193.1.1.1” 这里假设132.1.1.X是EMS主机地址，193.1.1.18是接入网元地址，193.1.1.1是接入网元侧路由器的局域网地址。</p>
</div><div id="part_5" style="display:none;"><p>方式四、直接连接加一对路由器方式<br />
当EMS主机和接入网元可以直接连接在同一个HUB或者交换机上，而且要求有第二路由保护的时候，一般使用这种方式。即除了是方式一接入外，再使用一对路由器把EMS主机同时连接另外一个接入网元，这样当本地直接连接的网元如果掉电或者NCP吊死等网络故障的时候，EMS可以通过另外的那个接入网元管理网络。<br />
该方式可以实现自动的网络路由保护。<br />
在这种情况下，EMS的IP地址通常设置为和直接相连的接入网元同一个IP地址段，也和直接相连的路由器的局域网地址处于同一网段。远端路由器和远端接入网元的地址在同一个网段。为了实现监控自动保护，则本方式路由器的配置上不能使用静态路由。<br />
路由设置中，为了保证下行数据流的正常传送：<br />
1>、EMS主机上设置网关为和EMS主机直接相连的路由器的局域网地址，或者在EMS主机上添加路由：“route add 193.1.0.0 mask 255.255.0.0 193.1.1.3”，这里假设193.1.0.0/16包含了所有网元，193.1.1.3为路由器的局域网地址；<br />
2>、路由器中启用OSPF，OSPF域和设备域一致。这样，下行数据就可以正常到达网元，请注意，和网元相连的路由器局域网口需要启用和设备一致的域（本例为193.0.0.0域），这样路由器才能起到ABR路由器的作用，才能正常转发路由表。<br />
为了保证上行数据流的正常传送：<br />
1>、网元到接入网元部分路由的顺畅由设备缺省运行的OSPF保证；<br />
2>、在接入网元到EMS主机部分，需要在路由器启用OSPF，且设备域的路由表要能够传播到路由器内，即要求路由器的域为骨干域或者和设备域一致。<br />
经过上述上、下行的设置后路由器就和设备形成一个统一的自治域，网元监控可以动态保护。<br />
上述描述略感复杂，其实，如果要实现本保护方式的配置，最简单的就两点：<br />
1、	EMS主机把网关设置为路由器的局域网口；<br />
2、	路由器都启用域和设备域一致的OSPF的动态路由协议。<br />
直接连接加一对路由器方式的配置如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/5.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/5.jpg"  alt="" /></a></p>
</div><div id="part_6" style="display:none;"><p>说明：中兴SDH和DWDM设备类似于一个路由器设备，设备缺省的OSPF的域与设备网段相关，假设设备为193.x.x.x，那么设备的OSPF域为193.0.0.0，对设备而言，192.0.0.0就是骨干域。对路由器而言，0.0.0.0或者0为骨干域。要设备缺省的OSPF和路由器的OSPF互通路由信息，需要设备为192.x.x.x网段或者路由器的域设置为0域（或者0.0.0.0域，表述方式不同，但都是骨干域）。本例中由于两个路由器的局域网口都和设备相连，因此局域网口都必须是和设备域一致，因此，如果路由器要使用骨干域则只能在广域网口启用，没有意义，最好直接启用和设备域一致的OSPF。<br />
当多个子网公用一对路由器进行保护的时候，由于是多个网段的地址要求路由器一个局域网端口绑定多个IP地址，而一般情况下路由器不能对非主IP地址段启用OSPF，这样启用OSPF的方法就只能通过其他路由协议从分布到OSPF中实现，具体配置请参考相关文档。</p>
<p>方式五、三个路由器方式<br />
当EMS主机和接入网元不能直接连接在同一个HUB或者交换机上，而且网络监控要求第二路由保护的时候，一般使用本方式。这种情况下，一般启用动态路由协议OSPF，可以把设备网络的网元IP地址的路由信息直达EMS主机相连的路由器，EMS主机再设置网关为与网管计算机直接相连的路由器的局域网地址即可实现有保护的监控网络设备。该方式可以实现网络路由的自动保护。<br />
这种方式常见于一级干线网络，EMS主机在一个省，而设备在另外的省，且监控还需要保护。这种情况下，IP地址通常为规划的专用网管IP地址。路由设置上如果要实现自动路由保护，路由器中不能采用静态路由配置。<br />
下行链路：<br />
1>、EMS主机要设置网关为相连接的路由器的局域网口，或者设置静态路由“route add 193.1.0.0 mask 255.255.0.0 132.1.1.1”（这里假设193.1.0.0/16包含了所有网元，132.1. 1.1为路由器的局域网地址）；<br />
2>、三个路由器要启用OSPF动态路由协议，域设置为和设备缺省一致或者使用骨干域，请注意，和网元相连的路由器局域网口需要启用和设备一致的域，这样路由器才能起到ABR路由器的作用，才能正常转发路由表。<br />
上行链路：设备缺省OSPF使得网元可以获得接入网元处的网段的路由，如果路由器都启用了动态路由，路由表会广播到整个设备网络，那么网元就可以获得EMS主机所在网段的路由信息，从而可以保证上行数据流的正常运行。如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/6.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/6.jpg"  alt="" /></a></p>
</div><div id="part_7" style="display:none;"><p>方式六、路由器网络<br />
当设备网络庞大，EMS主机众多，加上客户端众多，这种监控环境复杂和监控要求很高的网管网络系统的DCN一般都是采用专有的路由器网络来实现信息的传递。这类网络的EMS会有多个，IP地址会专门规划，通常可以把每一个EMS主机的连接方式简化为上述多种方式的组合，实现方法就不再赘述。但是不同的是考虑到众多的网络节点，不能通过加静态路由实现，所有的路由器都会启用OSPF，且一般都是启用骨干域的OSPF，把整个SMN和设备网络一起构成一个大的OSPF自治域，所有的路由信息在整个网络的节点中广播，从而实现全网的全自动监控保护。<br />
该方式可以实现网络路由的自动保护。</p>
<p>方式七、黑盒式DCN通道模式<br />
如果EMS主机和网络设备之间已经有基于TCP/IP的DCN通道，那么当建设网管网络的时候，一般就会利用这个DCN网络，但是通常不能满足把设备网络的所有IP地址的路由信息传递到EMS主机所在的局域网中，甚至有时候不能通过加静态路由的方式实现网络监控，对EMS主机和接入网元来说，只是知道和自己直接相连的端口的IP地址信息，中间的实现方式、路由信息等都是不可知的。那么，这种只提供两端接口IP的DCN网络的方式就可以叫作是黑盒式DCN通道模式。这种情况下与接入网元相连的路由器的局域网端口一般都是不开启OSPF动态路由功能的。<br />
黑盒式DCN通道模式下，网管计算机的网关设置为网络中指定的IP地址（通常为局方指定），同时在接入网元上需要增加一个静态路由保证网管主机能PING通接入网元，其他网元几乎都不可以通信，那么这个时候就需要接入网元使用网关网元功能，由接入网元负责对所有待管理的网元数据的转发。该方式的接入网元数量为两个或者两个以上，可以实现网络路由的自动保护。<br />
这种模式的主机IP地址采用规划IP地址，通常和提供的DCN接口的IP地址同一个网段。这种DCN模式下EMS需要使用网关网元功能，路由设置可以分为两种情况1、不需要监控保护，2、需要监控的主备保护，下面分别阐述。<br />
1>、不需要监控保护，EMS管理设备网络只通过一个网关网元，这个时候要求EMS主机能够ping通接入网元的IP地址，这一点，需要EMS主机设置网关为DCN提供的IP地址（或者设置到网关网元IP地址路由经过DCN提供的IP地址），接入网元上设置上行路由为DCN提供的接口IP地址（在EMS网管界面上设置），例如：route add 132.1.1.1 mask 255.255.255.255 193.1.1.3（假设132.1.1.1是EMS的IP地址， 193.1. 1.3为DCN提供的IP地址接口，网关网元的IP地址为193.1.1.18）。然后在设置其他网元的网关网元为接入的那个网元，并且启用网关网元功能即可实现网络的监控。<br />
如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/7.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/7.jpg"  alt="" /></a></p>
</div><div id="part_8" style="display:none;"><p>2>、需要监控的主备保护。这种主备保护需要设置两个网关网元，一个主，一个备。这个时候的IP地址需要设置为两个IP地址，这两个IP地址可以是不同网段的两个地址（取决于DCN能否提供两个网段的IP接口），也可以是同一网段的两个IP地址，两个IP地址要在EMS上分别和两个接入网元绑定，然后再EMS主机上分别设置对应的IP地址到对应的网关网元的IP地址需要的路由，设置主备网关网元到相应的EMS的主备IP地址的路由。例如：route add 132.1.1.1 mask 255.255.255.255 193.1.1.3，route add 132.1.1.2 mask 255.255.255.255 193.1.5.3，这里假设132.1.1.1、132.1.1.2是EMS的主备IP地址，193.1.1.3、193.1.5.3为DCN提供给主备网关网元的IP地址接口。然后在设置其他网元的主备网关网元为接入的两个网关网元，并且启用网关网元功能即可实现有保护的网络监控。如下图所示。</p>
<p><a href="http://images.xieziming.com/upload/file/dcn_ecc/8.jpg" class="highslide" onclick="return hs.expand(this)"><img src="http://images.xieziming.com/upload/file/dcn_ecc/8.jpg"  alt="" /></a></p>
<p>方式八、可配置DCN<br />
如果黑盒式DCN网络内部节点都可以添加指向传输网络内部的静态路由时，我们称为可以配置的DCN，这时，可以不使能接入网元的网关网元功能，即EMS可以不使用网关网元功能。<br />
可配置DCN从概念上来说包含上述以路由器组网的各种方式，只是我们这里特指非路由器方式，那么由于实现可配置DCN通道的方法很多，我们不能一一描述，但是配置方法和路由器方式差不多，各种具体配置请参考上述路由器方式。</p>
</div><div id="paginate"><label id="li_1" onclick="javascript:show_page(1,8,this);" style="font-size:30px;font-weight:bold" onmouseover="this.style.cursor='pointer'">1</label><label id="li_2" onclick="javascript:show_page(2,8,this);"  onmouseover="this.style.cursor='pointer'">2</label><label id="li_3" onclick="javascript:show_page(3,8,this);"  onmouseover="this.style.cursor='pointer'">3</label><label id="li_4" onclick="javascript:show_page(4,8,this);"  onmouseover="this.style.cursor='pointer'">4</label><label id="li_5" onclick="javascript:show_page(5,8,this);"  onmouseover="this.style.cursor='pointer'">5</label><label id="li_6" onclick="javascript:show_page(6,8,this);"  onmouseover="this.style.cursor='pointer'">6</label><label id="li_7" onclick="javascript:show_page(7,8,this);"  onmouseover="this.style.cursor='pointer'">7</label><label id="li_8" onclick="javascript:show_page(8,8,this);"  onmouseover="this.style.cursor='pointer'">8</label></div> 
			<div align="center">1 month ago, this page was being read. </div>
			<p class="tags"><a href="http://www.xieziming.com/tag/ji-shu" rel="tag">技术</a><br /></p>  
    </div><!-- /entry -->                                   
		<div class="postbottom"></div>		                              
		</div><!-- /post -->	

<div class="postrelated">
			<table width="100%" >				

					<tr><td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/2529.html" rel="bookmark" title="DAS、NAS与SAN">DAS、NAS与SA...</a></td>

					<td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/903.html" rel="bookmark" title="用VLAN分割广播域">用VLAN分割广播域</a></td>

					<td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/4300.html" rel="bookmark" title="Ruby（二）">Ruby（...</a></td>

				<td align="right" class="dashedline_related">★<a href="http://www.xieziming.com/archives/6398.html" rel="bookmark" title="外部调用QTP">外部调用QTP</a></td></tr>

					<tr><td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/2310.html" rel="bookmark" title="ECC协议簇学习">ECC协议簇学习</a></td>

					<td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/3993.html" rel="bookmark" title="令人费解的workflow">令人费解的work...</a></td>

					<td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/238.html" rel="bookmark" title="<数码摄影构图>">&lt;数码摄影构图&gt;</a></td>

				<td align="right" class="dashedline_related"><a href="http://www.xieziming.com/archives/2838.html" rel="bookmark" title="linux 网络命令">linux ...</a></td></tr>

					<tr><td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/714.html" rel="bookmark" title="不同网段无法PING通的原因">不同网段无法PING通...</a></td>

					<td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/2835.html" rel="bookmark" title="linux学习笔记">linux学习笔记</a></td>

					<td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/1300.html" rel="bookmark" title="桥接,NAT网络配置详解">桥接,NAT网络配...</a></td>

				<td align="right" class="dashedline_related">★<a href="http://www.xieziming.com/archives/567.html" rel="bookmark" title="ECC路由表初探">ECC路由表初探</a></td></tr>

					<tr><td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/4279.html" rel="bookmark" title="Ruby异常处理">Ruby异常处理</a></td>

					<td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/4302.html" rel="bookmark" title="Ruby（三）">Ruby（三...</a></td>

					<td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/4276.html" rel="bookmark" title="ROR笔记（一）">ROR笔记（一）</a></td>

				<td align="right" class="dashedline_related"><a href="http://www.xieziming.com/archives/3772.html" rel="bookmark" title="Mantis Bug Tracker">Mantis B...</a></td></tr>

					<tr><td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/4294.html" rel="bookmark" title="ROR笔记（二）">ROR笔记（二...</a></td>

					<td align="left" class="dashedline_related">★<a href="http://www.xieziming.com/archives/7150.html" rel="bookmark" title="Shell (二)">Shell (二)</a></td>

					<td align="left" class="dashedline_related"><a href="http://www.xieziming.com/archives/7145.html" rel="bookmark" title="Shell (一)">Shell (...</a></td>

				<td align="right" class="dashedline_related">★<a href="http://www.xieziming.com/archives/7152.html" rel="bookmark" title="Shell (三)">Shell (三)</a></td></tr>

		</table>
</div>

		<div id="comments">

<!-- START COMMENT FORMS -->


		</div><!--/comments-->		

</div><!-- /content -->
<div id="sidebar">			
			<a class="subscribe" href="http://www.xieziming.com/feed" title="Posts RSS">Subscribe</a>			
			<div id="search">	
	<form name="searchform" id="searchform" method="get" action="http://www.xieziming.com/index.php">
		<input class="text" type="text" name="s" id="s" value=""/>
		<input class="submit" type="image" src="http://www.xieziming.com/wp-content/themes/ziming/img/submit.jpg" value="search" />
	</form>	
</div><!-- /search -->			
			<div id="widgets">			
			<div class="widget"><h3>Calendar</h3>
<table id="wp-calendar">
  									<caption>January 2017</caption>
  									<thead>
                    <tr><th scope="col" title="S">S</th><th scope="col" title="M">M</th><th scope="col" title="T">T</th><th scope="col" title="W">W</th><th scope="col" title="T">T</th><th scope="col" title="F">F</th><th scope="col" title="S">S</th></tr></thead><tbody><tr><tr><td><span class="calnk_side"><a href="http://www.xieziming.com/calendar"  style="background-color:#E4E6BF;" target="_blank">1<span style="background-color:#E4E6BF; color:#000000;"><span class="event-title" style="color:#000000">新年</span><br/><span class="time" style="color:#000000; " > Time : 00:10 - 00:10</span><br /><p style="font-size:85%; margin:10px; text-align:left; color:#000000">出去过年的传统今年戛然而止，有点感冒，也是刚去完台北，来不及办日本的签证去北海道。</p></span></a></span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr><tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr><tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr><tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr><tr><td>29</td><td>30</td><td>31</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3" id="prev"><a href="http://www.xieziming.com/archives/732.html?month=dec&yr=2016">&laquo; Prev</a></td><td colspan="4" id="next"><a href="http://www.xieziming.com/archives/732.html?month=feb&yr=2017">Next &raquo;</a></td></tr></tbody></table>
<div class="widgetbottom"></div></div><!--/widget-->				
					      		<div class="widget">
 							<h3>Recent Posts</h3>
							<ul>
           				<li><a href="http://www.xieziming.com/archives/9602.html" class="dashedline" title="瑞芳 · 九份">瑞芳 &middot; 九份</a></li><li><a href="http://www.xieziming.com/archives/9601.html" class="dashedline" title="台北瑞芳">台北瑞芳</a></li><li><a href="http://www.xieziming.com/archives/9608.html" class="dashedline" title="台湾 · 艺术展">台湾 &middot; 艺术展</a></li><li><a href="http://www.xieziming.com/archives/9609.html" class="dashedline" title="中正纪念堂">中正纪念堂</a></li><li><a href="http://www.xieziming.com/archives/9603.html" class="dashedline" title="台北故宫">台北故宫</a></li><li><a href="http://www.xieziming.com/archives/9616.html" class="dashedline" title="Hualien">Hualien</a></li><li><a href="http://www.xieziming.com/archives/9607.html" class="dashedline" title="花莲 · 七星潭">花莲 &middot; 七星潭</a></li><li><a href="http://www.xieziming.com/archives/9599.html" class="dashedline" title="台北夜市">台北夜市</a></li>						
							</ul>
      				<div class="widgetbottom"></div>
	    		</div>
	    			        
        	      		<div class="widget">
 							<h3>Rand Posts</h3>
							<ul>
      						<li><a href="http://www.xieziming.com/archives/7838.html" class="dashedline" title="马六甲（二）">马六甲（二）</a></li><li><a href="http://www.xieziming.com/archives/8657.html" class="dashedline" title="朱家角">朱家角</a></li><li><a href="http://www.xieziming.com/archives/356.html" class="dashedline" title="太安静了...">太安静了...</a></li><li><a href="http://www.xieziming.com/archives/2956.html" class="dashedline" title="A区和B区一样吗？">A区和B区一样吗？</a></li><li><a href="http://www.xieziming.com/archives/4513.html" class="dashedline" title="下午茶">下午茶</a></li><li><a href="http://www.xieziming.com/archives/9269.html" class="dashedline" title="梨花女子大学（一）">梨花女子大学（一）</a></li><li><a href="http://www.xieziming.com/archives/5852.html" class="dashedline" title="沙面（二）">沙面（二）</a></li><li><a href="http://www.xieziming.com/archives/6089.html" class="dashedline" title="敦煌·雅丹">敦煌&middot;雅丹</a></li>	
							</ul>
        			<div class="widgetbottom"></div>
					</div>                 
          	                       
			</div><!-- /widgets -->			                       
</div><!-- /sidebar --></div><!-- /main -->
<div id="footer">
<p align="left">© <a href="http://www.xieziming.com/about" target="_blank"> 明 · 明 · 童 · 鞋</a></p>
<!--74 queries in 1.820 seconds.-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c2e18b43ec905e3c4ea82c1b57537223";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</div><!-- /footer -->
</div><!-- /container -->
<script type='text/javascript' src='http://www.xieziming.com/wp-includes/js/wp-embed.min.js?ver=4.7'></script>
</body>
</html>